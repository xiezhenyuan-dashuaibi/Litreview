@tailwind base;
@tailwind components;
@tailwind utilities;

/* 添加楷体字体支持 */
@font-face {
  font-family: 'KaiTi';
  src: local('KaiTi'), local('楷体');
  font-display: swap;
}

body {
  margin: 0;
  font-family: 'KaiTi', -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen',
    'Ubuntu', 'Cantarell', 'Fira Sans', 'Droid Sans', 'Helvetica Neue',
    sans-serif, 'Microsoft YaHei', 'PingFang SC';
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
  background: linear-gradient(135deg, #f8fafc 0%, #e2e8f0 100%);
}

code {
  font-family: source-code-pro, Menlo, Monaco, Consolas, 'Courier New',
    monospace;
}

/* 自定义滚动条 */
::-webkit-scrollbar {
  width: 8px;
  height: 8px;
}

::-webkit-scrollbar-track {
  background: #f1f1f1;
  border-radius: 4px;
}

::-webkit-scrollbar-thumb {
  background: #c1c1c1;
  border-radius: 4px;
}

::-webkit-scrollbar-thumb:hover {
  background: #a8a8a8;
}

/* 科研论文风格动画效果 */
@keyframes fadeIn {
  from {
    opacity: 0;
    transform: translateY(20px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

.animate-fadeIn {
  animation: fadeIn 0.5s ease-out;
}

@keyframes slideIn {
  from {
    transform: translateX(-100%);
  }
  to {
    transform: translateX(0);
  }
}

.animate-slideIn {
  animation: slideIn 0.3s ease-out;
}

/* 图片悬浮动画 */
@keyframes float {
  0%, 100% {
    transform: translateY(0px) rotate(0deg);
  }
  25% {
    transform: translateY(-10px) rotate(1deg);
  }
  75% {
    transform: translateY(-5px) rotate(-1deg);
  }
}

.animate-float {
  animation: float 3s ease-in-out infinite;
}

.flow-item {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 8px;
  animation: bob 4s ease-in-out infinite;
}

.flow-icon {
  width: 56px;
  height: 56px;
  border-radius: 9999px;
  display: flex;
  align-items: center;
  justify-content: center;
  background: linear-gradient(135deg, #f0f5ff 0%, #e6fffb 100%);
  box-shadow: 0 8px 24px rgba(0,0,0,0.08);
  color: #2F54EB;
  font-size: 22px;
}

.flow-text {
  font-size: 16px;
  letter-spacing: 0.08em;
  color: #334155;
}

@keyframes bob {
  0%, 100% { transform: translateY(0px); }
  50% { transform: translateY(-6px); }
}

.flow-line path {
  filter: drop-shadow(0 2px 6px rgba(19,194,194,0.2));
}

.animate-dash {
  stroke-dasharray: 8 6;
  animation: dash 3s linear infinite;
}

@keyframes dash {
  to { stroke-dashoffset: -60; }
}

/* 直线脉冲炫光：更长的虚线，平滑向右流动 */
.glow-dash {
  stroke-dasharray: 240 1400;
  animation: glowDash 1.6s linear infinite;
}

@keyframes glowDash {
  0% { stroke-dashoffset: 0; }
  100% { stroke-dashoffset: -1400; }
}

.glow-dash-soft {
  stroke-dasharray: 360 1400;
  animation: glowDashSoft 2.8s linear infinite;
}

@keyframes glowDashSoft {
  0% { stroke-dashoffset: 0; }
  100% { stroke-dashoffset: -1400; }
}

/* 脉冲光晕效果 */
@keyframes pulseGlow {
  0%, 100% {
    box-shadow: 0 0 20px rgba(47, 84, 235, 0.3);
  }
  50% {
    box-shadow: 0 0 40px rgba(47, 84, 235, 0.6);
  }
}

.animate-pulseGlow {
  animation: pulseGlow 2s ease-in-out infinite;
}

/* 渐变背景动画 */
@keyframes gradientShift {
  0%, 100% {
    background-position: 0% 50%;
  }
  50% {
    background-position: 100% 50%;
  }
}

.animate-gradientShift {
  background-size: 200% 200%;
  animation: gradientShift 4s ease infinite;
}

/* 红色动态开始按钮 */
.cta-button {
  background: linear-gradient(135deg, #ff4d4f 0%, #d22b2b 60%, #8b0000 100%);
  color: #fff;
  border: none;
  padding: 12px 28px;
  border-radius: 9999px;
  box-shadow: 0 12px 24px rgba(210, 43, 43, 0.35);
  letter-spacing: 0.12em;
  font-weight: 700;
  cursor: pointer;
  transition: transform 0.25s ease, box-shadow 0.25s ease, filter 0.25s ease;
  position: relative;
  overflow: hidden;
}

.cta-button::after {
  content: '';
  position: absolute;
  top: 0;
  left: -150%;
  width: 50%;
  height: 100%;
  background: linear-gradient(90deg, rgba(255,255,255,0), rgba(255,255,255,0.35), rgba(255,255,255,0));
  transform: skewX(-20deg);
  animation: shine 3s ease-in-out infinite;
}

@keyframes shine {
  0% { left: -150%; }
  60% { left: 120%; }
  100% { left: 120%; }
}

.cta-button:hover {
  transform: translateY(-2px) scale(1.03);
  filter: saturate(1.1);
}

.cta-active {
  box-shadow: 0 16px 36px rgba(210, 43, 43, 0.55);
}

.cta-glowPulse {
  animation: glowPulse 2.2s ease-in-out infinite;
}

@keyframes glowPulse {
  0%, 100% { box-shadow: 0 12px 24px rgba(210, 43, 43, 0.35); }
  50% { box-shadow: 0 20px 40px rgba(210, 43, 43, 0.6); }
}

/* 科研风格文字效果 */
.text-academic {
  font-family: 'KaiTi', serif;
  color: #1e293b;
  text-shadow: 0 1px 2px rgba(0, 0, 0, 0.1);
}

/* 全局白色边缘发光（适度） */
.glow-white {
  text-shadow:
    0 0 5px rgba(255,255,255,0.85),
    0 0 10px rgba(255,255,255,0.55),
    0 0 13px rgba(255,255,255,0.35);
}

/* 柔和过渡效果 */
.transition-soft {
  transition: all 0.6s cubic-bezier(0.4, 0, 0.2, 1);
}

/* 玻璃态效果 */
.glass-effect {
  backdrop-filter: blur(10px);
  background: rgba(255, 255, 255, 0.1);
  border: 1px solid rgba(255, 255, 255, 0.2);
}

/* 底部毛玻璃白色底栏（自适应） */
.bottom-glass {
  position: absolute;
  left: clamp(8px, 2vw, 64px);
  right: clamp(8px, 2vw, 64px);
  bottom: clamp(12px, 5vh, 48px);
  height: clamp(85px, 16vh, 160px);
  background: rgba(255, 255, 255, 0.35);
  border-radius: 24px;
  backdrop-filter: blur(16px);
  -webkit-backdrop-filter: blur(16px);
  box-shadow: 0 10px 30px rgba(0, 0, 0, 0.08);
  z-index: 0;
  pointer-events: none;
}

/* Three.js 场景样式 */
.ui-overlay {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  pointer-events: none;
  z-index: 10;
}

.interactive {
  pointer-events: auto;
}

.vertical-text {
  writing-mode: vertical-rl;
  text-orientation: upright;
  letter-spacing: 0.2em;
}

.fade-in {
  animation: fadeIn 1.5s ease-out forwards;
  opacity: 0;
}

@keyframes fadeIn {
  to { opacity: 1; }
}

/* 科研风格覆盖层 */
.research-overlay {
  font-family: "KaiTi", "STKaiti", "Noto Serif SC", serif;
}

/* Google Fonts 导入已移除，避免 @import 位置限制 */

/* 响应式设计 */
@media (max-width: 768px) {
  .vertical-text {
    font-size: 2rem !important;
  }
  
  .ui-overlay .absolute {
    transform: scale(0.8);
  }
  
  .ui-overlay .bottom-[8%] {
    bottom: 5% !important;
  }
  
  .ui-overlay .top-[15%] {
    top: 10% !important;
  }
}

@media (max-width: 480px) {
  .vertical-text {
    font-size: 1.5rem !important;
  }
  
  .ui-overlay .text-xs {
    font-size: 0.6rem !important;
  }
  
  .ui-overlay .px-6 {
    padding-left: 1rem !important;
    padding-right: 1rem !important;
  }
  
  .ui-overlay .py-3 {
    padding-top: 0.5rem !important;
    padding-bottom: 0.5rem !important;
  }
}

/* 统一风格：Warm Paper & Academic Serif */
:root {
  --paper-bg: #F9F7F2;
  --ink-text: #2C2C2C;
  --logic-blue: #4A90E2;
  --action-red-start: #ff4d4f;
  --action-red-end: #d22b2b;
  --soft-border: rgba(0,0,0,0.06);
  --glass-bg: rgba(255,255,255,0.75);
}

.paper-bg {
  background: var(--paper-bg);
}

.serif {
  font-family: "KaiTi", "STKaiti", "Noto Serif SC", serif;
  color: var(--ink-text);
}

.ink-text {
  color: var(--ink-text);
}

.section-title {
  display: flex;
  align-items: center;
  gap: 8px;
  font-weight: 700;
  color: var(--ink-text);
}

.section-title::before {
  content: "";
  display: inline-block;
  width: 8px;
  height: 24px;
  border-radius: 8px;
  background: linear-gradient(180deg, var(--action-red-start), var(--action-red-end));
}

/* 卡片玻璃态统一 */
.glass-card {
  background: var(--glass-bg);
  backdrop-filter: blur(12px);
  -webkit-backdrop-filter: blur(12px);
  border: 1px solid rgba(255,255,255,0.6);
  border-radius: 16px;
  box-shadow: 0 10px 30px rgba(0,0,0,0.06);
  position: relative;
}

/* 固定面板高度：不随内容增减，仅内部滚动 */
.fixed-panel {
  min-height: 0;
}

/* 独立高度：待完成任务 */
.fixed-panel-todo {
  height: 400px;
  min-height: 0;
  overflow: hidden;
}

/* 独立高度：已完成任务 */
.fixed-panel-done {
  height: 520px;
  min-height: 0;
  overflow: hidden;
}

.fab-next-step {
  position: fixed;
  right: 40px;
  bottom: 40px;
  z-index: 1000;
}

/* 次级输入风格（柔和白底+圆角） */
.soft-input {
  background: rgba(255,255,255,0.8) !important;
  border-color: var(--soft-border) !important;
  border-radius: 12px !important;
}

/* 主操作按钮（红色渐变） */
.primary-red-btn {
  background: linear-gradient(135deg, var(--action-red-start), var(--action-red-end)) !important;
  border-color: var(--action-red-end) !important;
  color: #fff !important;
  box-shadow: 0 12px 24px rgba(210, 43, 43, 0.35) !important;
}

.primary-red-btn:hover {
  filter: brightness(1.05);
}

/* Ant Design 全局外观统一（仅视觉覆盖，不改逻辑） */
.ant-layout {
  background: var(--paper-bg);
}

.ant-layout-header {
  background: rgba(255,255,255,0.7) !important;
  backdrop-filter: blur(8px);
  -webkit-backdrop-filter: blur(8px);
  border-bottom: 1px solid var(--soft-border) !important;
}

.ant-layout-sider {
  background: rgba(255,255,255,0.7) !important;
  border-right: 1px solid var(--soft-border);
}

.ant-menu {
  background: transparent !important;
  border-right: none !important;
  font-family: "KaiTi", "Noto Serif SC", serif;
}

.ant-menu-item {
  border-radius: 12px;
}

.ant-menu-item-selected {
  background: #fff !important;
  color: var(--ink-text) !important;
  box-shadow: 0 6px 16px rgba(0,0,0,0.06);
}

.ant-card {
  background: var(--glass-bg) !important;
  backdrop-filter: blur(10px);
  -webkit-backdrop-filter: blur(10px);
  border: 1px solid rgba(255,255,255,0.6) !important;
  border-radius: 16px !important;
  box-shadow: 0 10px 30px rgba(0,0,0,0.06) !important;
}

.ant-card-head {
  background: transparent !important;
  border-bottom: 1px solid var(--soft-border) !important;
}

.ant-btn {
  border-radius: 9999px !important;
  font-family: "KaiTi", "Noto Serif SC", serif;
}

.ant-btn-primary {
  background: linear-gradient(135deg, var(--action-red-start), var(--action-red-end)) !important;
  border-color: var(--action-red-end) !important;
  box-shadow: 0 12px 24px rgba(210, 43, 43, 0.35) !important;
}

.ant-btn-default {
  background: #fff !important;
  border-color: var(--soft-border) !important;
}

.ant-progress-bg {
  border-radius: 9999px !important;
}

.ant-tag {
  border-radius: 8px !important;
  font-family: "KaiTi", "Noto Serif SC", serif;
}

.ant-table {
  background: var(--glass-bg) !important;
}

.ant-table-thead > tr > th {
  background: rgba(0,0,0,0.02) !important;
  border-bottom-color: var(--soft-border) !important;
  font-family: "KaiTi", "Noto Serif SC", serif;
}

.ant-table-tbody > tr:hover > td {
  background: rgba(0,0,0,0.02) !important;
}

.ant-input, .ant-input-affix-wrapper, .ant-input-number, .ant-select-selector, .ant-input-textarea {
  border-radius: 12px !important;
  background: rgba(255,255,255,0.8) !important;
  border-color: var(--soft-border) !important;
}

.ant-typography {
  font-family: "KaiTi", "Noto Serif SC", serif;
  color: var(--ink-text);
}

/* Upload Dragger 全宽高度包裹 */
.ant-upload-wrapper .ant-upload-drag {
  width: 100% !important;
  min-height: 240px !important;
  overflow: hidden !important;
}
.ant-upload-wrapper .ant-upload-btn {
  display: block !important;
  height: 100% !important;
}
.ant-upload-wrapper .ant-upload-drag-container {
  height: 100% !important;
  display: flex !important;
  flex-direction: column !important;
  align-items: center !important;
  justify-content: center !important;
  transition: opacity 0.2s ease;
}

/* 上传列表覆盖为卡片内悬浮，不占用布局高度 */
.glass-card .upload-area .ant-upload-list {
  position: absolute;
  left: 5%;
  right: 5%;
  bottom: 12px;
  max-height: 120px;
  overflow-y: hidden; /* 禁止滚动 */
  transition: opacity 0.25s ease, transform 0.25s ease;
  z-index: 1;
}

/* 上传进度悬浮层：与上传列表位置一致 */
.glass-card .upload-area .upload-progress-overlay {
  position: absolute;
  inset: 0;
  opacity: 0;
  pointer-events: none;
  transition: opacity 0.2s ease;
  min-height: 120px;
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 2;
}

/* 点击开始上传后，淡出文件列表，显示进度条 */
.upload-overlay-active .upload-area .ant-upload-list {
  opacity: 0;
  transform: translateY(4px);
}

.upload-overlay-active .upload-area .upload-progress-overlay {
  opacity: 1;
}

/* 点击开始上传后淡出拖拽区文案与图标 */
.upload-overlay-active .upload-area .ant-upload-drag-container,
.upload-overlay-active .upload-area .ant-upload-btn {
  opacity: 0 !important;
}
/* 页面两列栅格 */
.page-grid {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 24px;
}
/* 聚类启动按钮高级动画 */
@keyframes pulse-ring-complex {
  0% { transform: scale(0.8); opacity: 0; box-shadow: 0 0 0 0 rgba(250, 140, 22, 0.7); }
  50% { opacity: 0.5; }
  100% { transform: scale(1.5); opacity: 0; box-shadow: 0 0 0 45px rgba(250, 140, 22, 0); }
}

@keyframes rotate-gradient {
  0% { background-position: 0% 50%; transform: rotate(0deg); }
  50% { background-position: 100% 50%; }
  100% { background-position: 0% 50%; transform: rotate(360deg); }
}

@keyframes orbit {
  from { transform: rotate(0deg) translateX(120px) rotate(0deg); }
  to { transform: rotate(360deg) translateX(120px) rotate(-360deg); }
}

.cluster-btn-wrapper {
  position: relative;
  width: 280px;
  height: 280px;
  display: flex;
  align-items: center;
  justify-content: center;
  transition: all 0.5s ease;
}

/* 激活状态下的动态背景光环 */
.cluster-btn-wrapper.active::before {
  content: '';
  position: absolute;
  inset: -10px;
  border-radius: 50%;
  background: conic-gradient(from 0deg, #FA8C16, #FA541C, #FA8C16);
  filter: blur(20px);
  opacity: 0.6;
  animation: rotate-gradient 4s linear infinite;
  z-index: 0;
}

/* 装饰性轨道圆环 */
.cluster-ring {
  position: absolute;
  inset: 0;
  border-radius: 50%;
  border: 1px solid rgba(250, 140, 22, 0.1);
  transition: all 0.5s ease;
  pointer-events: none;
}

.cluster-btn-wrapper.active .cluster-ring {
  border-color: rgba(250, 140, 22, 0.3);
  box-shadow: 0 0 30px rgba(250, 140, 22, 0.1);
  animation: pulse-ring-complex 3s cubic-bezier(0.215, 0.61, 0.355, 1) infinite;
}

/* 轨道粒子 */
.orbit-dot {
  position: absolute;
  top: 50%;
  left: 50%;
  width: 8px;
  height: 8px;
  background: #fff;
  border-radius: 50%;
  box-shadow: 0 0 10px #fff, 0 0 20px #FA8C16;
  z-index: 2;
  opacity: 0;
  margin-top: -4px;
  margin-left: -4px;
}

.cluster-btn-wrapper.active .orbit-dot {
  opacity: 1;
  animation: orbit 4s linear infinite;
}

/* 按钮本体增强 */
.cluster-glass-btn {
  position: relative;
  z-index: 10;
  backdrop-filter: blur(12px);
  background: rgba(255, 255, 255, 0.1);
  border: 1px solid rgba(255, 255, 255, 0.3);
  box-shadow: 
    0 4px 30px rgba(0, 0, 0, 0.1),
    inset 0 0 20px rgba(255, 255, 255, 0.2);
  transition: all 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);
  overflow: hidden;
}

.cluster-glass-btn::after {
  content: '';
  position: absolute;
  top: -50%;
  left: -50%;
  width: 200%;
  height: 200%;
  background: radial-gradient(circle, rgba(255,255,255,0.8) 0%, rgba(255,255,255,0) 70%);
  opacity: 0;
  transform: scale(0.5);
  transition: opacity 0.5s, transform 0.5s;
}

.cluster-glass-btn:hover::after {
  opacity: 0.15;
  transform: scale(1);
}

.cluster-btn-wrapper.active .cluster-glass-btn {
  background: linear-gradient(135deg, rgba(255, 169, 64, 0.85) 0%, rgba(250, 84, 28, 0.85) 100%);
  border: 1px solid rgba(255, 255, 255, 0.4);
  box-shadow: 
    0 20px 50px rgba(250, 140, 22, 0.4),
    inset 0 0 0 2px rgba(255, 255, 255, 0.1);
}

.cluster-btn-wrapper.active .cluster-glass-btn:hover {
  transform: scale(1.05);
  box-shadow: 
    0 30px 60px rgba(250, 140, 22, 0.6),
    inset 0 0 0 2px rgba(255, 255, 255, 0.3);
}

.text-glow {
  text-shadow: 0 0 10px rgba(255, 255, 255, 0.5);
}

.particle-bg {
  position: absolute;
  inset: 0;
  overflow: hidden;
  pointer-events: none;
}

.particle {
  position: absolute;
  border-radius: 50%;
  background: rgba(250, 140, 22, 0.2);
  animation: float-gentle 3s ease-in-out infinite;
}
/* 上传区域容器：填满卡片剩余空间 */
.upload-area {
  position: relative;
  flex: 1 1 auto;
}

/* Dragger 在上传区域内自适应尺寸 */
.upload-area .ant-upload-drag {
  width: 100% !important;
}
.page-grid-27 {
  display: grid;
  grid-template-columns: 5fr 4fr;
  gap: 24px;
}
.ant-menu-item {
  pointer-events: none;
  cursor: default;
}
.ant-menu-item:not(.ant-menu-item-selected) {
  opacity: 0.5;
}
